# GitHub Copilot 仕様駆動開発 - 完全ガイド

## 📖 1. はじめに

このプロジェクトは、**GitHub Copilot** の能力を最大限に引き出すために設計された、体系的な仕様駆動開発(SDD)環境を提供します。[spec-kit](https://github.com/github/spec-kit) にインスパイアされ、GitHub Copilot の最新のカスタマイズ機能と完全に統合されています。

コアとなる開発ワークフローは: **`仕様化`** → **`計画`** → **`タスク`** → **`実装`** です。

このガイドでは、このフレームワークを使用してソフトウェアを開発するための段階的なプロセスを説明します。

---

## 🚀 2. はじめに

### 前提条件

- GitHub Copilot ライセンス
- GitHub Copilot 拡張機能がインストールされた Visual Studio Code
- Git

### セットアップ

1. **フレームワークをインストール** します。

   ```bash
   # 既存のプロジェクトに移動するか、新しいプロジェクトを作成します
   cd your-project

   # インストーラーを実行します
   curl -fsSL https://raw.githubusercontent.com/code-onigiri/Github-Copilot-Spec-development/main/scripts/install.sh | bash
   ```

2. **VS Code でプロジェクトを開きます**。

   ```bash
   code .
   ```

   VS Code は `.vscode/extensions.json` で定義されている必要な拡張機能のインストールを推奨します。

---

## 🔄 3. コア開発ワークフロー

開発プロセスは 4 つの主要なフェーズに分かれています。VS Code チャットで専用のコマンド(例: `/ikak:specify`)を使用して各フェーズを進めます。

### フェーズ 0: プロジェクト憲章の定義(初回のみ)

開発を開始する前に、プロジェクトの中核となる原則を定義する必要があります。

- **コマンド**: `/ikak:constitution`
- **目的**: プロジェクトの一貫したルールとガイドラインを確立します。
- **プロセス**: 以下の定義を求められます:
  - プロジェクトのゴール
  - 開発原則(例: シンプルさ、TDD)
  - 品質ゲート
- **出力**: `memory/constitution.md`

### フェーズ 1: 機能の仕様化

構築したい機能の詳細な仕様を作成することから始めます。

- **コマンド**: `/ikak:specify [説明]`
- **例**: `/ikak:specify メール/パスワードログイン機能を持つユーザー認証システム`
- **目的**: 機能の要件、ユーザーストーリー、受け入れ基準を明確に定義します。
- **プロセス**:
  1.  Copilot があなたの説明を分析します。
  2.  テンプレートに基づいて構造化された仕様書を生成します。
- **出力**: `specs/[###-機能名]/spec.md`

### フェーズ 2: 実装計画の生成

仕様が明確になったら、実装のための技術計画を作成します。

- **コマンド**: `/ikak:plan [技術詳細]`
- **例**: `/ikak:plan Python と FastAPI、PostgreSQL を使用。認証には JWT を使用。`
- **目的**: アーキテクチャ、データモデル、API 契約を設計します。
- **プロセス**:
  1.  Copilot が `spec.md` を読み込みます。
  2.  あなたの入力と仕様に基づいて技術的なソリューションを設計します。
- **出力**:
  - `plan.md`: 全体的な実装戦略
  - `data-model.md`: データベーススキーマとデータ構造
  - `contracts/`: API エンドポイント定義
  - `research.md`: 技術的な質問の調査

### フェーズ 3: タスクへの分解

実装計画を小さな実行可能なタスクに分解します。

- **コマンド**: `/ikak:tasks`
- **目的**: コーディングタスクのチェックリストを作成します。
- **プロセス**: Copilot が `plan.md` と関連ドキュメントを分析してタスクリストを生成します。
- **出力**: `specs/[###-機能名]/tasks.md`
  - 各タスクには一意の ID (例: `[T001]`) があり、特定のファイルをターゲットにしています。

### フェーズ 4: コードの実装

Copilot の支援を受けて各タスクのコードを記述します。

- **コマンド**: `/ikak:implement [タスクID]`
- **例**: `/ikak:implement T001`
- **目的**: 単一のタスクのコードを記述、テスト、検証します。
- **プロセス**:
  1.  Copilot が指定されたタスクの詳細を読み込みます。
  2.  `spec.md`、`plan.md`、その他の関連ドキュメントからコンテキストを取得します。
  3.  コードと対応するテストを生成します。
  4.  完了したら、タスクを完了としてマークします。

---

## 🛠️ 4. その他のコマンド

### `/ikak:status`

- **目的**: プロジェクト全体の進捗状況と各機能のステータスを確認します。
- **表示内容**:
  - 各機能の完了率
  - 完了済みおよび保留中のタスクのリスト
  - 特定されたブロッカー

### `/ikak:debug [問題の説明]`

- **目的**: デバッグ駆動修正(DDF)メソドロジーを使用して、問題を体系的にデバッグして修正します。
- **プロセス**:
  1.  **期待値の明確化**: 正しい動作を定義します。
  2.  **現実の可視化**: ログを収集し、実際の動作を観察します。
  3.  **ギャップの分析**: 不一致を特定します。
  4.  **仮説の策定**: 潜在的な根本原因をリストアップします。
  5.  **テストと修正**: 仮説を検証し、修正を適用します。

---

## 🎨 5. 高度なカスタマイズ

このフレームワークは、GitHub Copilot のカスタマイズ機能を活用して、プロジェクトのニーズに合わせて動作を調整します。ディレクトリ構造とこれらのファイルの動作の詳細については、`STRUCTURE.md` を参照してください。

- **カスタム指示 (`.github/copilot-instructions.md`)**: すべてのインタラクションに対して Copilot に高レベルのガイダンスを提供します。
- **パス固有の指示 (`.github/instructions/`)**: 特定のディレクトリ(例: `specs/`)内のファイルで作業する際に特定のルールを適用します。
- **カスタムチャットモード (`.github/chatmodes/`)**: `planning` モードや `review` モードなど、Copilot の専門的な「ペルソナ」を作成します。
- **再利用可能なプロンプト (`.github/prompts/`)**: ワンクリックで実行できる複雑なマルチステッププロンプトを保存します。
- **VS Code 設定 (`.vscode/settings.json`)**: すべてのカスタマイズ機能をエディターに統合します。

---

## 🏛️ 6. プロジェクト構造とカスタマイズ

このセクションでは、プロジェクトのディレクトリ構造と GitHub Copilot のカスタマイズ機能の活用方法を詳しく説明します。

### ディレクトリ構造の概要

プロジェクトは SDD ワークフローをサポートし、GitHub Copilot に明確なコンテキストを提供するように構成されています。

```
.
├── .github/         # Copilot カスタマイズファイル
├── .specify/        # SDD コマンドのコアフレームワーク
├── memory/          # プロジェクトの長期メモリ
├── specs/           # 機能仕様
└── .vscode/         # VS Code 固有の設定
```

### `.github/`: Copilot のカスタマイズ

このディレクトリは Copilot の動作をカスタマイズする中心的な場所です。

- **`copilot-instructions.md`**: Copilot のグローバル指示。すべてのインタラクションに対する全体的なルールとコンテキストを設定し、SDD ワークフローへの準拠を確保します。
- **`chatmodes/`**: Copilot の専門的な「ペルソナ」を定義します。例えば、`planning.chatmode.md` は Copilot をソフトウェアアーキテクトとして動作するように設定します。チャットビューでモードを切り替えて、計画やコードレビューなどの特定のタスクに対してより正確でコンテキストに応じた応答を得ることができます。
- **`prompts/`**: 複雑で再利用可能なプロンプトを保存します。これにより、チャットインターフェイスからワンクリックで、マルチステップの反復的なタスク(計画をタスクに分解するなど)を実行できます。
- **`instructions/`**: 特定のファイルパスにのみ適用される指示を含みます。例えば、Copilot が `specs/` ディレクトリ内のファイルで作業している場合にのみアクティブになるルールを定義でき、すべての仕様が一貫した形式に従うことを保証します。

### `memory/`: プロジェクトの頭脳

このディレクトリはプロジェクトの長期メモリとして機能し、Copilot がセッション間でコンテキストを維持するのを支援します。3 つのレイヤーで構成されています:

1.  **`constitution.md` (レイヤー 1)**: プロジェクトの不変のコア原則を含みます。これは `/ikak:constitution` コマンドを使用して一度定義され、ほとんど変更されません。
2.  **`context/` (レイヤー 2)**: アーキテクチャの決定(`architecture.md`)やコーディング規約(`conventions.md`)など、進化する技術的およびビジネスコンテキストを保存します。このレイヤーはプロジェクトの成長に応じて更新されます。
3.  **`changelog/` (レイヤー 3)**: 重要な決定と変更のログで、プロジェクトの進化の歴史的記録を提供します。

### `specs/`: 機能仕様

すべての機能開発はここから始まります。各機能は独自のサブディレクトリを持ち、その機能のライフサイクルの自己完結型モジュールとして機能します。典型的な機能ディレクトリには以下が含まれます:

- `spec.md`: 初期仕様
- `plan.md`: 技術実装計画
- `tasks.md`: コーディングタスクのチェックリスト
- `data-model.md` や `contracts/` などのその他のドキュメント

### `.vscode/`: エディター統合

このディレクトリは一貫した開発環境を保証します。

- **`settings.json`**: `.github/` ディレクトリ内の Copilot カスタマイズファイルを自動的に認識して使用するように VS Code を設定します。
- **`extensions.json`**: プロジェクトの VS Code 拡張機能を推奨し、すべてのチームメンバーが必要なツールを持っていることを保証します。
